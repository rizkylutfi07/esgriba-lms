var Le=Object.defineProperty,Qe=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var me=(d,a,r)=>a in d?Le(d,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[a]=r,f=(d,a)=>{for(var r in a||(a={}))Re.call(a,r)&&me(d,r,a[r]);if(de)for(var r of de(a))Oe.call(a,r)&&me(d,r,a[r]);return d},v=(d,a)=>Qe(d,Me(a));var j=(d,a,r)=>new Promise((o,w)=>{var K=p=>{try{E(r.next(p))}catch(I){w(I)}},q=p=>{try{E(r.throw(p))}catch(I){w(I)}},E=p=>p.done?o(p.value):Promise.resolve(p.value).then(K,q);E((r=r.apply(d,a)).next())});import{j as e}from"./vendor-ui-XVksrZ5j.js";import{u as Ue,h as $e,r as u}from"./vendor-react-DruPVAFJ.js";import{f as ve,u as Ae,B as c,C as B,d as D,a as Ge,b as Fe,L as N,I as $,X as Ve}from"./index-BmVdEGiP.js";import{B as b}from"./badge-DVlZ2whw.js";import{M as ue}from"./MathContent-BLSKFKlW.js";import{D as A,a as X,b as G,c as F,d as V,e as z}from"./dialog-FHcYl0q1.js";import{S as xe,a as he,b as pe,c as je,d as Y}from"./select-CT0oUeJ5.js";import{T as ge}from"./textarea-Bx_nRJgZ.js";import{t as M}from"./testService-BhFWneWt.js";import{q as fe}from"./questionBankService-C-0gTY5G.js";import{q as ze}from"./questionPackageService-DdsMbR7c.js";import{r as Ke}from"./remedialService-Bu3r_nxH.js";import{A as He}from"./arrow-left-C1WfDAGK.js";import{T as Je}from"./trending-up-WSJC20Jg.js";import{P as We}from"./pen-square-DdkHHRrl.js";import{D as Xe}from"./download-Cc0AJeaF.js";import{C as Z}from"./check-BFyP0Qeo.js";import{P as Ye}from"./package-CqcFhlWf.js";import{P as Ze}from"./plus-BcW2gs2h.js";import{F as es}from"./file-text-8Keq495L.js";import{T as ss}from"./trash-2-SALYx2gF.js";import"./vendor-utils-DI_-nBMo.js";import"./vendor-charts-BB9d_U7u.js";import"./vendor-math-BWdfurLP.js";import"./chevron-down-CL3T_hsi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ve("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ve("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);function Bs(){var oe,ce;const d=Ue(),{toast:a}=Ae(),{id:r}=$e(),[o,w]=u.useState(null),[K,q]=u.useState(!0),[E,p]=u.useState(!1),[I,H]=u.useState(!1),[n,S]=u.useState({question_text:"",question_type:"multiple_choice",points:10,expected_answer:"",options:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]}),[ee,be]=u.useState([]),[k,se]=u.useState([]),[ke,te]=u.useState(!1),[ye,J]=u.useState(!1),[W,ae]=u.useState([]),[_e,ie]=u.useState(!1),[T,R]=u.useState(""),[re,ne]=u.useState(!1),[Ne,O]=u.useState(!1),[y,le]=u.useState({start_time:"",end_time:""}),we={easy:"Mudah",medium:"Sedang",hard:"Sulit"};u.useEffect(()=>(w(null),q(!0),L(),()=>{w(null)}),[r]);const L=(s=!1)=>j(this,null,function*(){var t;try{s||q(!0);const i=new Date().getTime(),l=yield M.getTest(parseInt(r),{_t:i});console.log("Test data loaded:",l),console.log("Questions count:",((t=l.questions)==null?void 0:t.length)||0),w(l)}catch(i){console.error("Error loading test:",i),a({title:"Error",description:"Gagal memuat data ujian",variant:"destructive"}),d("/tests")}finally{s||q(!1)}}),Se=()=>j(this,null,function*(){try{te(!0);const s=yield fe.getQuestions({subject:o==null?void 0:o.subject,limit:50});be(s.data||[])}catch(s){a({title:"Error",description:"Gagal memuat bank soal",variant:"destructive"})}finally{te(!1)}}),Ce=()=>j(this,null,function*(){var s,t,i,l;if(o)try{ie(!0);const x=yield ze.getAll({per_page:100}),_=(s=x.data)!=null?s:x,Q=Array.isArray(_)?_:(t=_==null?void 0:_.data)!=null?t:[],m=o.subject?o.subject.toLowerCase():"",C=m?Q.filter(h=>{var P;return((P=h.subject)!=null&&P.name?String(h.subject.name).toLowerCase():"")===m}):Q;ae(C)}catch(x){a({title:"Error",description:((l=(i=x==null?void 0:x.response)==null?void 0:i.data)==null?void 0:l.message)||"Gagal memuat paket soal",variant:"destructive"}),ae([])}finally{ie(!1)}}),Pe=()=>j(this,null,function*(){var s,t,i;if(!T){a({title:"Pilih Paket",description:"Silakan pilih paket soal terlebih dahulu",variant:"destructive"});return}try{ne(!0);const l=yield M.addPackage(parseInt(r,10),parseInt(T,10));if(console.log("Package import response:",l),l!=null&&l.test||l!=null&&l.data){const x=l.test||l.data;console.log("Updated test from response:",x),console.log("Questions from response:",((s=x.questions)==null?void 0:s.length)||0),w(x)}else console.log("No test in response, reloading..."),yield L(!0);a({title:"Sukses",description:"Paket soal berhasil ditambahkan"}),J(!1),R("")}catch(l){console.error("Package import error:",l),a({title:"Error",description:((i=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:i.message)||"Gagal menambahkan paket soal",variant:"destructive"})}finally{ne(!1)}}),g=T?W.find(s=>s.id===parseInt(T,10)):void 0,Te=()=>j(this,null,function*(){if(k.length===0){a({title:"Error",description:"Pilih minimal 1 soal",variant:"destructive"});return}try{yield fe.addQuestionsToTest(parseInt(r),k),yield L(!0),a({title:"Sukses",description:`${k.length} soal berhasil ditambahkan`}),H(!1),se([])}catch(s){a({title:"Error",description:s.message||"Gagal menambahkan soal",variant:"destructive"})}}),Be=()=>j(this,null,function*(){if(!n.question_text){a({title:"Error",description:"Teks soal harus diisi",variant:"destructive"});return}if(n.question_type==="multiple_choice"){const s=n.options.filter(i=>i.option_text.trim()!=="");if(s.length<2){a({title:"Error",description:"Minimal 2 pilihan jawaban harus diisi",variant:"destructive"});return}if(!s.some(i=>i.is_correct)){a({title:"Error",description:"Pilih minimal 1 jawaban yang benar",variant:"destructive"});return}}try{const s={question_text:n.question_text,question_type:n.question_type,points:n.points,options:n.question_type==="essay"?[]:n.options.filter(t=>t.option_text.trim()!=="")};yield M.addQuestion(parseInt(r),s),yield L(!0),a({title:"Sukses",description:"Soal berhasil ditambahkan"}),p(!1),S({question_text:"",question_type:"multiple_choice",points:10,expected_answer:"",options:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]})}catch(s){a({title:"Error",description:s.message||"Gagal menambahkan soal",variant:"destructive"})}}),De=s=>j(this,null,function*(){if(confirm("Yakin ingin menghapus soal ini dari ujian?"))try{yield M.removeQuestion(parseInt(r),s),yield L(!0),a({title:"Sukses",description:"Soal berhasil dihapus"})}catch(t){a({title:"Error",description:"Gagal menghapus soal",variant:"destructive"})}}),qe=s=>{const t=[...n.options];t[s].is_correct=!t[s].is_correct,S(v(f({},n),{options:t}))},Ee=(s,t)=>{const i=[...n.options];i[s].option_text=t,S(v(f({},n),{options:i}))};return K?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Memuat data ujian..."})]})}):o?e.jsxs("div",{className:"p-2 sm:p-2 space-y-6 max-w-5xl w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>d("/tests"),children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold truncate text-foreground",children:o.title}),e.jsxs("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:[o.subject," • ",o.kelas]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:flex-nowrap",children:[e.jsxs(c,{onClick:()=>d(`/tests/${r}/results`),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Lihat Hasil"]}),e.jsxs(c,{variant:"outline",onClick:()=>d(`/tests/${r}/edit`),children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Edit Ujian"]}),e.jsxs(c,{variant:"outline",onClick:()=>O(!0),children:[e.jsx(ts,{className:"w-4 h-4 mr-2"})," Clone ke Remidi"]}),Number((o==null?void 0:o.allowed_students_count)||0)>0&&e.jsxs(c,{variant:"outline",onClick:()=>j(this,null,function*(){try{const s=yield Ke.exportCsv(parseInt(r,10)),t=window.URL.createObjectURL(s),i=document.createElement("a");i.href=t,i.download=`remedial_students_test_${r}.csv`,i.click(),window.URL.revokeObjectURL(t)}catch(s){a({title:"Error",description:"Gagal mengunduh CSV remidi",variant:"destructive"})}}),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"})," Export Remidi (CSV)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[e.jsx(B,{children:e.jsxs(D,{className:"pt-4 sm:pt-6",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:((oe=o.questions)==null?void 0:oe.length)||0}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total Soal"})]})}),e.jsx(B,{children:e.jsxs(D,{className:"pt-4 sm:pt-6",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:o.duration}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Menit"})]})}),e.jsx(B,{children:e.jsxs(D,{className:"pt-4 sm:pt-6",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:o.passing_score}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Nilai KKM"})]})}),e.jsx(B,{children:e.jsxs(D,{className:"pt-4 sm:pt-6",children:[e.jsx(b,{className:o.status==="draft"?"bg-gray-500":o.status==="scheduled"?"bg-blue-500":o.status==="active"?"bg-green-500":"bg-red-500",children:o.status}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-2",children:"Status"})]})})]}),e.jsxs(B,{children:[e.jsxs(Ge,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(Fe,{children:"Daftar Soal"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(A,{open:I,onOpenChange:s=>{H(s),s&&Se()},children:[e.jsx(X,{asChild:!0,children:e.jsxs(c,{variant:"outline",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Dari Bank Soal"]})}),e.jsxs(G,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsx(V,{children:"Pilih dari Bank Soal"}),e.jsx(z,{children:"Pilih soal yang ingin ditambahkan ke ujian ini"})]}),e.jsx("div",{className:"space-y-4",children:ke?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):ee.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Belum ada soal di bank soal untuk mata pelajaran ini"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:ee.map(s=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition ${k.includes(s.id)?"border-blue-500 bg-blue-50 dark:bg-blue-950 dark:border-blue-600":"hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>{se(t=>t.includes(s.id)?t.filter(i=>i!==s.id):[...t,s.id])},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:s.question_text}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(b,{variant:"outline",children:s.category||"Umum"}),e.jsx(b,{variant:"outline",children:s.difficulty||"Medium"}),e.jsxs(b,{variant:"outline",children:[s.points," poin"]})]})]}),k.includes(s.id)&&e.jsx(Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]})},s.id))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{variant:"outline",onClick:()=>H(!1),children:"Batal"}),e.jsxs(c,{onClick:Te,disabled:k.length===0,children:["Tambah"," ",k.length>0&&`(${k.length})`]})]})]})})]})]}),e.jsxs(A,{open:ye,onOpenChange:s=>{J(s),s?Ce():R("")},children:[e.jsx(X,{asChild:!0,children:e.jsxs(c,{variant:"outline",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Dari Paket Soal"]})}),e.jsxs(G,{className:"max-w-lg",children:[e.jsxs(F,{children:[e.jsx(V,{children:"Pilih Paket Soal"}),e.jsx(z,{children:"Import seluruh soal dari paket yang dipilih ke ujian ini."})]}),e.jsx("div",{className:"space-y-4",children:_e?e.jsx("div",{className:"text-center py-6",children:"Memuat paket soal..."}):W.length===0?e.jsx("div",{className:"text-center py-6 text-gray-500",children:"Tidak ada paket soal yang tersedia untuk mata pelajaran ini."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(N,{children:"Paket Soal"}),e.jsxs(xe,{value:T,onValueChange:R,children:[e.jsx(he,{children:e.jsx(pe,{placeholder:"Pilih paket soal"})}),e.jsx(je,{children:W.map(s=>e.jsxs(Y,{value:s.id.toString(),children:[s.name," (",s.total_questions," soal)"]},s.id))})]})]}),g&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"font-medium",children:g.name}),g.description&&e.jsx("p",{className:"text-sm text-gray-600",children:g.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-gray-600",children:[e.jsxs(b,{variant:"outline",children:[g.total_questions," soal"]}),e.jsxs(b,{variant:"outline",children:[g.total_points," poin"]}),g.difficulty_level&&e.jsx(b,{variant:"outline",children:(ce=we[g.difficulty_level])!=null?ce:g.difficulty_level})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>{J(!1),R("")},children:"Batal"}),e.jsx(c,{onClick:Pe,disabled:re||!T,children:re?"Mengimpor...":"Tambahkan"})]})]})})]})]}),e.jsxs(A,{open:E,onOpenChange:p,children:[e.jsx(X,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Buat Soal Baru"]})}),e.jsxs(G,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsx(V,{children:"Buat Soal Baru"}),e.jsx(z,{children:"Buat soal baru langsung untuk ujian ini"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Teks Soal *"}),e.jsx(ge,{value:n.question_text,onChange:s=>S(v(f({},n),{question_text:s.target.value})),placeholder:"Masukkan pertanyaan...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Tipe Soal *"}),e.jsxs(xe,{value:n.question_type,onValueChange:s=>{S(v(f({},n),{question_type:s,options:s==="essay"?[]:n.options.length>0?n.options:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]}))},children:[e.jsx(he,{children:e.jsx(pe,{placeholder:"Pilih tipe soal"})}),e.jsxs(je,{children:[e.jsx(Y,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(Y,{value:"essay",children:"Essay"})]})]})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Poin *"}),e.jsx($,{type:"number",value:n.points,onChange:s=>S(v(f({},n),{points:parseInt(s.target.value)})),min:"1"})]})]}),n.question_type==="essay"&&e.jsxs("div",{children:[e.jsx(N,{children:"Jawaban yang Diharapkan (Opsional)"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Sebagai acuan guru saat menilai jawaban siswa"}),e.jsx(ge,{value:n.expected_answer||"",onChange:s=>S(v(f({},n),{expected_answer:s.target.value})),placeholder:"Contoh jawaban yang benar...",rows:4})]}),n.question_type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx(N,{children:"Pilihan Jawaban *"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Klik ✓ untuk menandai jawaban yang benar"}),e.jsx("div",{className:"space-y-2",children:n.options.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(c,{type:"button",variant:s.is_correct?"default":"outline",size:"sm",className:"w-8 h-8 p-0",onClick:()=>qe(t),children:s.is_correct?e.jsx(Z,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"})}),e.jsxs("span",{className:"w-6 text-center font-medium",children:[String.fromCharCode(65+t),"."]}),e.jsx($,{value:s.option_text,onChange:i=>Ee(t,i.target.value),placeholder:`Pilihan ${String.fromCharCode(65+t)}`})]},t))})]}),n.question_type==="essay"&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Info:"})," Soal essay tidak memerlukan pilihan jawaban. Siswa akan menjawab dengan mengetik jawaban mereka sendiri."]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{variant:"outline",onClick:()=>p(!1),children:"Batal"}),e.jsx(c,{onClick:Be,children:"Tambah Soal"})]})]})]})]})]})]}),e.jsx(D,{children:!o.questions||o.questions.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(es,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"Belum ada soal"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tambahkan soal dari bank soal atau buat soal baru"})]}):e.jsx("div",{className:"space-y-4",children:o.questions.map((s,t)=>e.jsx(B,{className:"border-l-4 border-l-blue-500",children:e.jsxs(D,{className:"pt-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(b,{variant:"outline",children:["Soal ",t+1]}),e.jsxs(b,{variant:"outline",children:[s.points," poin"]})]}),e.jsx(ue,{content:s.question_text,className:"font-medium mb-3 text-foreground"})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>De(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",children:e.jsx(ss,{className:"w-4 h-4"})})]}),s.options&&s.options.length>0&&e.jsx("div",{className:"space-y-2 ml-4",children:s.options.map((i,l)=>e.jsxs("div",{className:`p-2 rounded flex items-center gap-2 ${i.is_correct?"bg-green-50 border border-green-200 dark:bg-green-950 dark:border-green-800":"bg-gray-50 dark:bg-gray-800"}`,children:[e.jsxs("span",{className:"font-medium text-foreground",children:[String.fromCharCode(65+l),"."]}),e.jsx(ue,{content:i.option_text,className:"inline text-foreground"}),i.is_correct&&e.jsx(Z,{className:"w-4 h-4 text-green-600 dark:text-green-400 ml-auto"})]},i.id))})]})},s.id))})})]}),e.jsx(A,{open:Ne,onOpenChange:O,children:e.jsxs(G,{children:[e.jsxs(F,{children:[e.jsx(V,{children:"Clone ke Ujian Remidi"}),e.jsx(z,{children:"Masukkan jadwal baru untuk ujian remidi. Soal akan disalin dari ujian ini."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"remedial_start_time",children:"Waktu Mulai *"}),e.jsx($,{id:"remedial_start_time",type:"datetime-local",value:y.start_time,onChange:s=>le(v(f({},y),{start_time:s.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"remedial_end_time",children:"Waktu Selesai *"}),e.jsx($,{id:"remedial_end_time",type:"datetime-local",value:y.end_time,onChange:s=>le(v(f({},y),{end_time:s.target.value})),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>O(!1),children:"Batal"}),e.jsx(c,{onClick:()=>j(this,null,function*(){var s,t,i,l,x,_,Q;if(!y.start_time||!y.end_time){a({title:"Error",description:"Jadwal harus diisi",variant:"destructive"});return}try{const m=P=>P?P.replace("T"," ")+":00":"",C={start_time:m(y.start_time),end_time:m(y.end_time)};console.log("Sending payload:",C);const h=yield M.cloneRemedial(parseInt(r,10),C),U=(t=(s=h==null?void 0:h.test)==null?void 0:s.id)!=null?t:h==null?void 0:h.id;a({title:"Sukses",description:"Ujian remidi berhasil dibuat (draft)."}),O(!1),U&&d(`/tests/${U}/edit`)}catch(m){console.error("Clone remedial error:",m),console.error("Response data:",(i=m==null?void 0:m.response)==null?void 0:i.data);const C=(x=(l=m==null?void 0:m.response)==null?void 0:l.data)==null?void 0:x.errors;let h=((Q=(_=m==null?void 0:m.response)==null?void 0:_.data)==null?void 0:Q.message)||"Gagal clone remidi";C&&(h=Object.entries(C).map(([P,Ie])=>`${P}: ${Ie.join(", ")}`).join(`
`)||h),a({title:"Error",description:h,variant:"destructive"})}}),children:"Buat Ujian Remidi"})]})]})]})})]}):null}export{Bs as default};
