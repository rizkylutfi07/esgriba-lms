var De=Object.defineProperty,Te=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var te=(c,h,i)=>h in c?De(c,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[h]=i,d=(c,h)=>{for(var i in h||(h={}))Ee.call(h,i)&&te(c,i,h[i]);if(se)for(var i of se(h))Be.call(h,i)&&te(c,i,h[i]);return c},o=(c,h)=>Te(c,Ae(h));var P=(c,h,i)=>new Promise((v,Q)=>{var C=y=>{try{T(i.next(y))}catch(A){Q(A)}},O=y=>{try{T(i.throw(y))}catch(A){Q(A)}},T=y=>y.done?v(y.value):Promise.resolve(y.value).then(C,O);T((i=i.apply(c,h)).next())});import{j as e}from"./vendor-ui-XVksrZ5j.js";import{u as Ie,r as m}from"./vendor-react-DruPVAFJ.js";import{f as Qe,u as Me,h as Ge,B as j,C as L,a as He,b as Oe,d as $,L as u,I as H}from"./index-BmVdEGiP.js";import{M as Ve}from"./MathContent-BLSKFKlW.js";import{S as k,a as N,b as S,c as w,d as n}from"./select-CT0oUeJ5.js";import{D as Fe,b as ze,c as Le,d as $e,e as Ke,f as Je}from"./dialog-FHcYl0q1.js";import{A as le,a as ie,b as re,c as ne,d as ce,e as de,f as oe,g as xe}from"./alert-dialog-DeGwCm2P.js";import{C as he}from"./checkbox-DXq8pLEd.js";import{q as D}from"./questionBankService-C-0gTY5G.js";import{m as ue}from"./masterDataService-BT0EDdvP.js";import{T as K}from"./textarea-Bx_nRJgZ.js";import{T as me}from"./trash-2-SALYx2gF.js";import{U as Re}from"./upload-BUKVXWUj.js";import{P as pe}from"./plus-BcW2gs2h.js";import{S as Ue}from"./search-NdQjMSfE.js";import{B as Ye}from"./book-open-CXdsRrc-.js";import{P as We}from"./pen-square-DdkHHRrl.js";import{C as Xe}from"./copy-pRjNeCAu.js";import{C as Ze}from"./chevron-left-Cico8d1J.js";import{C as qe}from"./chevron-right-DGvanUYx.js";import"./vendor-utils-DI_-nBMo.js";import"./vendor-charts-BB9d_U7u.js";import"./vendor-math-BWdfurLP.js";import"./chevron-down-CL3T_hsi.js";import"./check-BFyP0Qeo.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Qe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function Ca(){var X,Z,q,ee,ae;const{toast:c}=Me(),h=Ie(),{user:i}=Ge(),[v,Q]=m.useState([]),[C,O]=m.useState([]),[T,y]=m.useState([]),[A,ge]=m.useState([]),[J,R]=m.useState(!0),[je,E]=m.useState(!1),[M,U]=m.useState(null),[V,F]=m.useState(null),[p,b]=m.useState([]),[fe,z]=m.useState(!1),[x,ve]=m.useState({total:0,lastPage:1,currentPage:1,perPage:50}),[r,_]=m.useState({per_page:50,page:1}),[l,g]=m.useState({subject_id:0,category:"",question_text:"",question_type:"multiple_choice",expected_answer:"",difficulty_level:1,points:10,explanation:"",options:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]});m.useEffect(()=>{ye()},[]),m.useEffect(()=>{G()},[r]);const ye=()=>P(this,null,function*(){try{const a=[ue.subjects.getAll(),D.getCategories()];(i==null?void 0:i.role)==="admin"&&a.push(ue.teachers.getAll());const s=yield Promise.all(a),[t,f,B]=s;O(t),y(f),B&&ge(B),t.length>0&&!l.subject_id&&g(I=>o(d({},I),{subject_id:t[0].id}))}catch(a){c({title:"Error",description:"Gagal memuat data awal",variant:"destructive"})}}),G=()=>P(this,null,function*(){var a,s;try{R(!0);const t=yield D.getQuestions(r);t.data&&Array.isArray(t.data)?(Q(t.data),t.total&&ve({total:t.total,lastPage:t.last_page||Math.ceil(t.total/(r.per_page||50)),currentPage:t.current_page||r.page||1,perPage:t.per_page||r.per_page||50})):Q(Array.isArray(t)?t:[])}catch(t){c({title:"Error",description:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Gagal memuat soal",variant:"destructive"})}finally{R(!1)}}),be=()=>P(this,null,function*(){var a;try{const s=o(d({},l),{options:l.question_type==="essay"?[]:(a=l.options)==null?void 0:a.filter(t=>t.text.trim()!=="")});(i==null?void 0:i.role)==="admin"&&l.teacher_id?s.teacher_id=l.teacher_id:delete s.teacher_id,M?(yield D.updateQuestion(M.id,s),c({title:"Sukses",description:"Soal berhasil diperbarui"})):(yield D.createQuestion(s),c({title:"Sukses",description:"Soal berhasil ditambahkan"})),E(!1),Y(),G()}catch(s){c({title:"Error",description:s.message||"Gagal menyimpan soal",variant:"destructive"})}}),_e=()=>P(this,null,function*(){var a,s;if(V)try{yield D.deleteQuestion(V.id),c({title:"Sukses",description:"Soal berhasil dihapus"}),F(null),G()}catch(t){c({title:"Error",description:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Gagal menghapus soal",variant:"destructive"})}}),ke=()=>P(this,null,function*(){var a,s;if(p.length!==0)try{yield D.bulkDeleteQuestions(p),c({title:"Sukses",description:`${p.length} soal berhasil dihapus`}),b([]),z(!1),G()}catch(t){c({title:"Error",description:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Gagal menghapus soal",variant:"destructive"})}}),Ne=()=>{p.length===v.length?b([]):b(v.map(a=>a.id))},Se=a=>{p.includes(a)?b(p.filter(s=>s!==a)):b([...p,a])},we=a=>P(this,null,function*(){var s,t;try{yield D.duplicateQuestion(a.id),c({title:"Sukses",description:"Soal berhasil diduplikasi"}),G()}catch(f){c({title:"Error",description:((t=(s=f.response)==null?void 0:s.data)==null?void 0:t.message)||"Gagal menduplikasi soal",variant:"destructive"})}}),Ce=a=>{var s;U(a),g({subject_id:a.subject_id,category:a.category,question_text:a.question_text,question_type:a.question_type,expected_answer:a.expected_answer||"",difficulty_level:a.difficulty_level,points:a.points,explanation:a.explanation||"",teacher_id:a.created_by,options:((s=a.options)==null?void 0:s.map(t=>({text:t.text,is_correct:t.is_correct})))||[]}),E(!0)},Y=()=>{U(null),g({subject_id:C.length>0?C[0].id:0,category:"",question_text:"",question_type:"multiple_choice",expected_answer:"",difficulty_level:1,points:10,explanation:"",options:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]})},W=(a,s,t)=>{const f=[...l.options];s==="is_correct"&&t===!0?f.forEach((B,I)=>{B.is_correct=I===a}):f[a]=o(d({},f[a]),{[s]:t}),g(o(d({},l),{options:f}))},Pe={1:"Mudah",2:"Sedang",3:"Sulit"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Bank Soal"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Kelola bank soal untuk digunakan pada ujian"})]}),e.jsxs("div",{className:"flex gap-2",children:[p.length>0&&e.jsxs(j,{variant:"destructive",onClick:()=>z(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Hapus (",p.length,")"]}),e.jsxs(j,{variant:"outline",onClick:()=>{const a=r.subject_id?`/question-bank/import?subject_id=${r.subject_id}`:"/question-bank/import";h(a)},children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Import Excel"]}),e.jsxs(j,{onClick:()=>E(!0),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Tambah Soal"]})]})]}),e.jsxs(L,{children:[e.jsx(He,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-4 h-4"}),"Filter"]})}),e.jsx($,{children:e.jsxs("div",{className:`grid grid-cols-1 ${(i==null?void 0:i.role)==="admin"?"md:grid-cols-5":"md:grid-cols-4"} gap-4`,children:[e.jsxs("div",{children:[e.jsx(u,{children:"Cari Soal"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(H,{placeholder:"Cari teks soal...",className:"pl-8",value:r.search||"",onChange:a=>_(o(d({},r),{search:a.target.value,page:1}))})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Mata Pelajaran"}),e.jsxs(k,{value:((X=r.subject_id)==null?void 0:X.toString())||"all",onValueChange:a=>_(o(d({},r),{subject_id:a==="all"?void 0:parseInt(a),page:1})),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Semua"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"Semua"}),C.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(i==null?void 0:i.role)==="admin"&&e.jsxs("div",{children:[e.jsx(u,{children:"Pembuat Soal (Guru)"}),e.jsxs(k,{value:((Z=r.creator_id)==null?void 0:Z.toString())||"all",onValueChange:a=>_(o(d({},r),{creator_id:a==="all"?void 0:parseInt(a),page:1})),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Semua Guru"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"Semua Guru"}),A.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Tingkat Kesulitan"}),e.jsxs(k,{value:((q=r.difficulty_level)==null?void 0:q.toString())||"all",onValueChange:a=>_(o(d({},r),{difficulty_level:a==="all"?void 0:parseInt(a),page:1})),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Semua"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"Semua"}),e.jsx(n,{value:"1",children:"Mudah"}),e.jsx(n,{value:"2",children:"Sedang"}),e.jsx(n,{value:"3",children:"Sulit"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Tipe Soal"}),e.jsxs(k,{value:r.question_type||"all",onValueChange:a=>_(o(d({},r),{question_type:a==="all"?void 0:a,page:1})),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Semua"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"Semua"}),e.jsx(n,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(n,{value:"essay",children:"Essay"})]})]})]})]})})]}),e.jsx(L,{children:e.jsx($,{className:"p-0",children:J?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):v.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Belum ada soal di bank"}),e.jsxs(j,{className:"mt-4",onClick:()=>E(!0),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Tambah Soal Pertama"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-12",children:e.jsx(he,{checked:p.length===v.length&&v.length>0,onCheckedChange:Ne})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-16",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-24",children:"Tipe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Pertanyaan"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-32",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-40",children:"Mapel"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-40",children:"Pembuat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-24",children:"Tingkat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider w-20",children:"Poin"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider w-40",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:v.map((a,s)=>{var t,f;return e.jsxs("tr",{className:`hover:bg-muted/30 transition ${p.includes(a.id)?"bg-blue-500/10 dark:bg-blue-500/20":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(he,{checked:p.includes(a.id),onCheckedChange:()=>Se(a.id)})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s+1}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.question_type==="essay"?"bg-purple-500/10 text-purple-700 dark:bg-purple-500/20 dark:text-purple-400":"bg-green-500/10 text-green-700 dark:bg-green-500/20 dark:text-green-400"}`,children:a.question_type==="essay"?"Essay":"PG"})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm max-w-md",children:e.jsx(Ve,{content:a.question_text.length>100?a.question_text.substring(0,100)+"...":a.question_text,className:"line-clamp-2"})}),a.options&&a.options.length>0&&e.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:a.options.map((B,I)=>B.is_correct?e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["✓ ",String.fromCharCode(65+I)]},I):null)})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:a.category})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:((t=a.subject)==null?void 0:t.name)||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:((f=a.creator)==null?void 0:f.name)||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${a.difficulty_level===1?"bg-green-500/10 text-green-700 dark:bg-green-500/20 dark:text-green-400":a.difficulty_level===2?"bg-yellow-500/10 text-yellow-700 dark:bg-yellow-500/20 dark:text-yellow-400":"bg-red-500/10 text-red-700 dark:bg-red-500/20 dark:text-red-400"}`,children:Pe[a.difficulty_level]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:a.points}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>Ce(a),title:"Edit",children:e.jsx(We,{className:"w-4 h-4"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>we(a),title:"Duplikasi",children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>F(a),title:"Hapus",className:"hover:bg-red-50",children:e.jsx(me,{className:"w-4 h-4 text-red-600"})})]})})]},a.id)})})]})})})}),!J&&v.length>0&&x.total>0&&e.jsx(L,{children:e.jsx($,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Menampilkan"," ",(x.currentPage-1)*x.perPage+1," -"," ",Math.min(x.currentPage*x.perPage,x.total)," ","dari ",x.total," soal"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"text-sm text-muted-foreground",children:"Per halaman:"}),e.jsxs(k,{value:((ee=r.per_page)==null?void 0:ee.toString())||"50",onValueChange:a=>{_(o(d({},r),{per_page:parseInt(a),page:1})),b([])},children:[e.jsx(N,{className:"w-20",children:e.jsx(S,{})}),e.jsxs(w,{children:[e.jsx(n,{value:"10",children:"10"}),e.jsx(n,{value:"25",children:"25"}),e.jsx(n,{value:"50",children:"50"}),e.jsx(n,{value:"100",children:"100"}),e.jsx(n,{value:"200",children:"200"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>{_(o(d({},r),{page:Math.max(1,(r.page||1)-1)})),b([])},disabled:!r.page||r.page<=1,children:[e.jsx(Ze,{className:"w-4 h-4 mr-1"}),"Sebelumnya"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x.lastPage)},(a,s)=>{let t;return x.lastPage<=5||x.currentPage<=3?t=s+1:x.currentPage>=x.lastPage-2?t=x.lastPage-4+s:t=x.currentPage-2+s,e.jsx(j,{variant:x.currentPage===t?"default":"outline",size:"sm",onClick:()=>{_(o(d({},r),{page:t})),b([])},className:"w-9",children:t},t)})}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>{_(o(d({},r),{page:Math.min(x.lastPage,(r.page||1)+1)})),b([])},disabled:!r.page||r.page>=x.lastPage,children:["Selanjutnya",e.jsx(qe,{className:"w-4 h-4 ml-1"})]})]})]})})}),e.jsx(Fe,{open:je,onOpenChange:E,children:e.jsxs(ze,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Le,{children:[e.jsx($e,{children:M?"Edit Soal":"Tambah Soal Baru"}),e.jsxs(Ke,{children:["Isi form di bawah untuk"," ",M?"mengubah":"menambah"," soal ke bank"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{children:"Mata Pelajaran *"}),e.jsxs(k,{value:l.subject_id.toString(),onValueChange:a=>g(o(d({},l),{subject_id:parseInt(a)})),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Pilih mata pelajaran"})}),e.jsx(w,{children:C.length===0?e.jsx("div",{className:"px-2 py-1 text-sm text-muted-foreground",children:"Tidak ada mata pelajaran"}):C.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))})]}),C.length===0&&e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"Belum ada mata pelajaran. Hubungi admin."})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Kategori *"}),e.jsx(H,{value:l.category,onChange:a=>g(o(d({},l),{category:a.target.value})),placeholder:"Contoh: Trigonometri",list:"categories-list"}),T.length>0&&e.jsx("datalist",{id:"categories-list",children:T.map((a,s)=>e.jsx("option",{value:a},s))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ketik atau pilih dari kategori yang ada"})]}),(i==null?void 0:i.role)==="admin"&&e.jsxs("div",{children:[e.jsx(u,{children:"Ditugaskan untuk Guru (Opsional)"}),e.jsxs(k,{value:((ae=l.teacher_id)==null?void 0:ae.toString())||"none",onValueChange:a=>g(o(d({},l),{teacher_id:a==="none"?void 0:parseInt(a)})),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Pilih guru (opsional)"})}),e.jsxs(w,{children:[e.jsx(n,{value:"none",children:"Tidak ada (atas nama admin)"}),A.filter(a=>{var s;return!l.subject_id||((s=a.subjects)==null?void 0:s.some(t=>t.id===l.subject_id))}).map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Soal akan ditampilkan atas nama guru yang dipilih"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{children:"Tipe Soal *"}),e.jsxs(k,{value:l.question_type,onValueChange:a=>{let s=[];a==="multiple_choice"&&(s=[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]),g(o(d({},l),{question_type:a,options:s}))},children:[e.jsx(N,{children:e.jsx(S,{})}),e.jsxs(w,{children:[e.jsx(n,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(n,{value:"essay",children:"Essay"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Kesulitan *"}),e.jsxs(k,{value:l.difficulty_level.toString(),onValueChange:a=>g(o(d({},l),{difficulty_level:parseInt(a)})),children:[e.jsx(N,{children:e.jsx(S,{})}),e.jsxs(w,{children:[e.jsx(n,{value:"1",children:"Mudah"}),e.jsx(n,{value:"2",children:"Sedang"}),e.jsx(n,{value:"3",children:"Sulit"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Poin *"}),e.jsx(H,{type:"number",value:l.points,onChange:a=>g(o(d({},l),{points:parseInt(a.target.value)}))})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Pertanyaan *"}),e.jsx(K,{value:l.question_text,onChange:a=>g(o(d({},l),{question_text:a.target.value})),placeholder:"Tulis pertanyaan di sini...",rows:4})]}),l.question_type==="essay"&&e.jsxs("div",{children:[e.jsx(u,{children:"Jawaban yang Diharapkan (Opsional)"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Sebagai acuan guru saat menilai jawaban siswa"}),e.jsx(K,{value:l.expected_answer||"",onChange:a=>g(o(d({},l),{expected_answer:a.target.value})),placeholder:"Contoh jawaban yang benar...",rows:4})]}),l.question_type==="multiple_choice"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Pilihan Jawaban *"}),l.options.map((a,s)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(H,{value:a.text,onChange:t=>W(s,"text",t.target.value),placeholder:`Pilihan ${String.fromCharCode(65+s)}`,className:"flex-1"}),e.jsx(j,{type:"button",variant:a.is_correct?"default":"outline",size:"sm",onClick:()=>W(s,"is_correct",!a.is_correct),children:a.is_correct?"✓ Benar":"Tandai Benar"})]},s))]}),l.question_type==="essay"&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 dark:border-blue-500/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:[e.jsx("strong",{children:"Info:"})," Soal essay tidak memerlukan pilihan jawaban. Siswa akan menjawab dengan mengetik jawaban mereka sendiri."]})}),e.jsxs("div",{children:[e.jsx(u,{children:"Penjelasan (Opsional)"}),e.jsx(K,{value:l.explanation,onChange:a=>g(o(d({},l),{explanation:a.target.value})),placeholder:"Penjelasan jawaban...",rows:3})]})]}),e.jsxs(Je,{children:[e.jsx(j,{variant:"outline",onClick:()=>{E(!1),Y()},children:"Batal"}),e.jsxs(j,{onClick:be,children:[M?"Simpan":"Tambah"," Soal"]})]})]})}),e.jsx(le,{open:!!V,onOpenChange:()=>F(null),children:e.jsxs(ie,{children:[e.jsxs(re,{children:[e.jsx(ne,{children:"Hapus Soal?"}),e.jsx(ce,{children:"Soal yang dihapus tidak dapat dikembalikan. Yakin ingin menghapus soal ini?"})]}),e.jsxs(de,{children:[e.jsx(oe,{children:"Batal"}),e.jsx(xe,{onClick:_e,children:"Hapus"})]})]})}),e.jsx(le,{open:fe,onOpenChange:z,children:e.jsxs(ie,{children:[e.jsxs(re,{children:[e.jsxs(ne,{children:["Hapus ",p.length," Soal?"]}),e.jsxs(ce,{children:["Tindakan ini akan menghapus ",p.length," soal yang dipilih secara permanen. Data yang dihapus tidak dapat dikembalikan."]})]}),e.jsxs(de,{children:[e.jsx(oe,{children:"Batal"}),e.jsx(xe,{onClick:ke,className:"bg-red-600 hover:bg-red-700",children:"Hapus Semua"})]})]})})]})}export{Ca as default};
