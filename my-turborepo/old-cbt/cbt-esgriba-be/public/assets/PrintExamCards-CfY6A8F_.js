var p=(o,m,r)=>new Promise((h,t)=>{var x=s=>{try{i(r.next(s))}catch(u){t(u)}},n=s=>{try{i(r.throw(s))}catch(u){t(u)}},i=s=>s.done?h(s.value):Promise.resolve(s.value).then(x,n);i((r=r.apply(o,m)).next())});import{j as e}from"./vendor-ui-XVksrZ5j.js";import{r as d}from"./vendor-react-DruPVAFJ.js";import{f as R,u as B,e as A,L as g,I as N,B as C}from"./index-BmVdEGiP.js";import{S as D,a as M,b as F,c as G,d as E}from"./select-CT0oUeJ5.js";import"./vendor-utils-DI_-nBMo.js";import"./vendor-charts-BB9d_U7u.js";import"./chevron-down-CL3T_hsi.js";import"./check-BFyP0Qeo.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=R("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),H=({name:o,className:m,urlLogin:r,username:h,password:t,examName:x,year:n,printDate:i})=>e.jsxs("div",{className:"exam-card-new",children:[e.jsxs("div",{className:"card-header-new",children:[e.jsx("div",{className:"header-logo",children:e.jsx("img",{src:"/logo-sekolah.png",alt:"Logo Sekolah",className:"logo-img",onError:s=>{console.error("Logo tidak ditemukan")}})}),e.jsxs("div",{className:"header-title",children:[e.jsx("div",{className:"title-line",children:"SMKS PGRI BANYUPUTIH"}),e.jsx("div",{className:"title-line",children:x}),e.jsxs("div",{className:"title-line",children:["TAHUN PELAJARAN ",n]})]}),e.jsx("div",{className:"header-panitia",children:e.jsx("div",{className:"panitia-box",children:"Panitia"})})]}),e.jsx("div",{className:"header-body",children:"KARTU PESERTA"}),e.jsx("div",{className:"card-body-new",children:e.jsx("table",{className:"data-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"label-col",children:"Nama"}),e.jsx("td",{className:"colon-col",children:":"}),e.jsx("td",{className:"value-col",children:o})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"label-col",children:"Kelas"}),e.jsx("td",{className:"colon-col",children:":"}),e.jsx("td",{className:"value-col",children:m})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"label-col",children:"Url Login"}),e.jsx("td",{className:"colon-col",children:":"}),e.jsx("td",{className:"value-col",children:r})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"label-col",children:"Username"}),e.jsx("td",{className:"colon-col",children:":"}),e.jsx("td",{className:"value-col",children:h})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"label-col",children:"Password"}),e.jsx("td",{className:"colon-col",children:":"}),e.jsx("td",{className:"value-col",children:"123456"})]})]})})}),e.jsxs("div",{className:"card-footer-new",children:[e.jsx("div",{className:"footer-note",children:e.jsxs("div",{style:{fontWeight:"bold"},children:["NB : KARTU UJIAN",e.jsx("br",{}),"WAJIB DIBAWA",e.jsx("br",{}),"SELAMA UJIAN",e.jsx("br",{}),"BERLANGSUNG...!!!"]})}),e.jsxs("div",{className:"footer-signature",children:[e.jsxs("div",{className:"sig-date",children:["Banyuputih, ",i]}),e.jsx("div",{className:"sig-title",children:"Kepala Sekolah,"}),e.jsx("div",{className:"sig-space"}),e.jsx("div",{className:"sig-name",children:"Irawan Adi Wasito, S.T"})]})]})]});function X(){const[o,m]=d.useState([]),[r,h]=d.useState("all"),[t,x]=d.useState([]),[n,i]=d.useState(!1),[s,u]=d.useState(!1),[v,y]=d.useState("SUMATIF AKHIR SEMESTER GANJIL"),[k,I]=d.useState(new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),[f,L]=d.useState(window.location.origin),[w,T]=d.useState("2025/2026"),{toast:j}=B();d.useEffect(()=>{P()},[]);const P=()=>p(this,null,function*(){try{const a=yield A.get("/classes");m(a.data.data||[])}catch(a){console.error("Error fetching classes:",a),j({title:"Error",description:"Gagal memuat data kelas",variant:"destructive"})}}),U=()=>p(this,null,function*(){var a,c;i(!0);try{const l={};r!=="all"&&(l.class_id=r);const S=yield A.get("/exam-cards",{params:l});x(S.data.data||[]),u(!0),S.data.data.length===0&&j({title:"Info",description:"Tidak ada siswa aktif untuk dicetak",variant:"default"})}catch(l){console.error("Error fetching cards:",l),j({title:"Error",description:((c=(a=l.response)==null?void 0:a.data)==null?void 0:c.message)||"Gagal memuat data kartu",variant:"destructive"})}finally{i(!1)}}),K=()=>{if(t.length===0){j({title:"Error",description:"Tidak ada kartu untuk dicetak",variant:"destructive"});return}window.print()},b=[];for(let a=0;a<t.length;a+=8)b.push(t.slice(a,a+8));return e.jsxs("div",{className:"print-exam-cards-container",children:[e.jsx("div",{className:"no-print control-panel bg-white dark:bg-slate-800 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 mb-4",children:e.jsxs("div",{className:"space-y-4 p-4 sm:p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Cetak Kartu Peserta Ujian"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 dark:bg-slate-900/50 p-4 sm:p-6 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"examName",className:"text-slate-700 dark:text-slate-300 font-medium",children:"Nama Ujian"}),e.jsx(N,{id:"examName",value:v,onChange:a=>y(a.target.value),placeholder:"Contoh: SUMATIF AKHIR SEMESTER GANJIL",className:"mt-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"academicYear",className:"text-slate-700 dark:text-slate-300 font-medium",children:"Tahun Pelajaran"}),e.jsx(N,{id:"academicYear",value:w,onChange:a=>T(a.target.value),placeholder:"Contoh: 2025/2026",className:"mt-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"printDate",className:"text-slate-700 dark:text-slate-300 font-medium",children:"Tanggal Cetak"}),e.jsx(N,{id:"printDate",value:k,onChange:a=>I(a.target.value),placeholder:"Contoh: 22 November 2025",className:"mt-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"urlLogin",className:"text-slate-700 dark:text-slate-300 font-medium",children:"URL Login"}),e.jsx(N,{id:"urlLogin",value:f,onChange:a=>L(a.target.value),placeholder:"Contoh: https://cbt.sekolah.sch.id",className:"mt-1 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"w-full sm:w-64",children:[e.jsx(g,{className:"text-slate-700 dark:text-slate-300 font-medium mb-2 block",children:"Pilih Kelas"}),e.jsxs(D,{value:r,onValueChange:h,children:[e.jsx(M,{className:"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600",children:e.jsx(F,{placeholder:"Pilih Kelas"})}),e.jsxs(G,{children:[e.jsx(E,{value:"all",children:"Semua Kelas"}),o.map(a=>{var c;return e.jsxs(E,{value:a.id.toString(),children:[a.class_name,(c=a.major)!=null&&c.name?` - ${a.major.name}`:""]},a.id)})]})]})]}),e.jsx(C,{onClick:U,disabled:n,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-md",children:n?"Memuat...":"Tampilkan Kartu"}),s&&t.length>0&&e.jsxs(C,{onClick:K,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-md",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Cetak (",t.length," Kartu)"]})]}),s&&t.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4 shadow-sm",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("strong",{className:"font-semibold",children:"Info:"})," Total"," ",t.length," kartu akan dicetak dalam ",b.length," ","halaman F4 (33cm x 21.5cm)",e.jsx("br",{}),e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"(8 kartu per halaman - 2 kolom x 4 baris dengan gap 3mm)"})]})})]})}),s&&t.length>0&&e.jsx("div",{className:"print-area rounded-lg bg-white shadow-sm",children:b.map((a,c)=>e.jsx("div",{className:"print-page",children:e.jsx("div",{className:"cards-grid",children:a.map(l=>e.jsx(H,{name:l.name,className:l.class_name,urlLogin:f,username:l.username,password:l.password,examName:v,year:w,printDate:k},l.id))})},c))}),!s&&!n&&e.jsx("div",{className:"no-print text-center py-20",children:e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm sm:text-base",children:'Pilih kelas dan klik "Tampilkan Kartu" untuk melihat preview'})})]})}export{X as default};
