var f=(r,p,l)=>new Promise((n,a)=>{var g=s=>{try{d(l.next(s))}catch(i){a(i)}},c=s=>{try{d(l.throw(s))}catch(i){a(i)}},d=s=>s.done?n(s.value):Promise.resolve(s.value).then(g,c);d((l=l.apply(r,p)).next())});import{j as e}from"./vendor-ui-XVksrZ5j.js";import{u as w,r as u}from"./vendor-react-DruPVAFJ.js";import{u as y,h as _,B as b,a as C,b as T,d as S}from"./index-BmVdEGiP.js";import{r as $}from"./reportService-B_dxLGS9.js";import{B as h}from"./book-open-CXdsRrc-.js";import{U as j}from"./users-Cv97A8df.js";import{T as B}from"./trending-up-WSJC20Jg.js";import{C as D}from"./check-circle-BdZ4TSjl.js";import{A as G}from"./activity-BvSUlSke.js";import{F as v}from"./file-text-8Keq495L.js";import{P as U}from"./plus-BcW2gs2h.js";import{C as A}from"./clock-eO0sA20s.js";import{S as V}from"./shield-kQPazkiq.js";import"./vendor-utils-DI_-nBMo.js";import"./vendor-charts-BB9d_U7u.js";function Y(){const r=w(),{toast:p}=y(),{token:l,isAuthenticated:n}=_(),[a,g]=u.useState(null),[c,d]=u.useState([]),[s,i]=u.useState(!0);u.useEffect(()=>{n&&l&&k()},[n,l]);const k=()=>f(this,null,function*(){var t,m,x;try{i(!0);const o=yield $.getTeacherDashboard();g(o.summary),d(o.recent_tests||[])}catch(o){((t=o.response)==null?void 0:t.status)!==401&&p({title:"Error",description:((x=(m=o.response)==null?void 0:m.data)==null?void 0:x.message)||"Gagal memuat dashboard",variant:"destructive"})}finally{i(!1)}}),N=[{title:"Total Ujian",value:(a==null?void 0:a.total_tests)||0,subValue:`${(a==null?void 0:a.active_tests)||0} ujian aktif`,icon:h,gradient:"from-indigo-500 to-blue-500",bgGradient:"from-indigo-50 to-blue-50 dark:from-indigo-950/50 dark:to-blue-950/50"},{title:"Total Peserta",value:(a==null?void 0:a.total_attempts)||0,subValue:`${(a==null?void 0:a.completed_attempts)||0} selesai`,icon:j,gradient:"from-purple-500 to-pink-500",bgGradient:"from-purple-50 to-pink-50 dark:from-purple-950/50 dark:to-pink-950/50"},{title:"Rata-rata Nilai",value:a!=null&&a.average_score?a.average_score.toFixed(1):"0",subValue:"Dari semua ujian",icon:B,gradient:"from-emerald-500 to-teal-500",bgGradient:"from-emerald-50 to-teal-50 dark:from-emerald-950/50 dark:to-teal-950/50"},{title:"Tingkat Kelulusan",value:`${a!=null&&a.pass_rate?a.pass_rate.toFixed(1):"0"}%`,subValue:"Siswa lulus",icon:D,gradient:"from-orange-500 to-amber-500",bgGradient:"from-orange-50 to-amber-50 dark:from-orange-950/50 dark:to-amber-950/50"}];return s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"modern-card p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg floating",children:e.jsx(G,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold gradient-text",children:"Dashboard Guru"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Kelola ujian dan pantau hasil siswa"})]})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsxs(b,{variant:"outline",onClick:()=>r("/question-bank"),className:"flex-1 md:flex-none",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Bank Soal"]}),e.jsxs(b,{onClick:()=>r("/tests/create"),className:"flex-1 md:flex-none bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-md",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Buat Ujian"]})]})]})}),e.jsx("div",{className:"grid gap-4 md:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:N.map((t,m)=>{const x=t.icon;return e.jsxs("div",{className:"modern-card hover:scale-105 transition-transform duration-300 overflow-hidden group",style:{animationDelay:`${m*100}ms`},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(T,{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:t.title}),e.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br ${t.gradient} shadow-lg`,children:e.jsx(x,{className:"h-5 w-5 text-white"})})]}),e.jsxs(S,{className:"relative z-10",children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-slate-700 to-slate-900 dark:from-slate-100 dark:to-slate-300 bg-clip-text text-transparent",children:t.value}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex items-center gap-1",children:t.subValue})]})]},t.title)})}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Ujian Terbaru"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Daftar ujian yang baru dibuat atau diperbarui"})]}),e.jsx(b,{variant:"ghost",onClick:()=>r("/tests"),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:"Lihat Semua"})]}),e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-2xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-3 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Belum ada ujian"}),e.jsx(b,{variant:"link",className:"mt-2 text-blue-600",onClick:()=>r("/tests/create"),children:"Buat Ujian Pertama"})]}):c.map(t=>e.jsx("div",{className:"group relative p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 hover:border-blue-200 dark:hover:border-blue-500 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>r(`/tests/${t.id}`),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${t.is_active?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:e.jsx(v,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-1.5 text-sm text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-slate-50 dark:bg-slate-700/50",children:[e.jsx(h,{className:"w-3.5 h-3.5"}),t.subject]}),e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-slate-50 dark:bg-slate-700/50",children:[e.jsx(j,{className:"w-3.5 h-3.5"}),t.kelas]}),e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-slate-50 dark:bg-slate-700/50",children:[e.jsx(A,{className:"w-3.5 h-3.5"}),t.duration,"m"]}),Number(t.allowed_students_count||0)>0&&e.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-medium",children:[e.jsx(V,{className:"w-3.5 h-3.5"})," Remidi"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:flex-col sm:items-end sm:gap-1 pl-14 sm:pl-0",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t.is_active?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-600"}`,children:t.is_active?"Aktif":"Draft"}),t.total_questions>0&&e.jsxs("span",{className:"text-xs text-slate-400",children:[t.total_questions," soal"]})]})]})},t.id))})]})]})}export{Y as default};
