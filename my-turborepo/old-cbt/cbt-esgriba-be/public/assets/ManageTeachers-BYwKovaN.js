var be=Object.defineProperty,Ne=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var re=(m,o,n)=>o in m?be(m,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[o]=n,f=(m,o)=>{for(var n in o||(o={}))ve.call(o,n)&&re(m,n,o[n]);if(te)for(var n of te(o))ke.call(o,n)&&re(m,n,o[n]);return m},b=(m,o)=>Ne(m,we(o));var S=(m,o,n)=>new Promise((d,i)=>{var v=k=>{try{C(n.next(k))}catch(E){i(E)}},L=k=>{try{C(n.throw(k))}catch(E){i(E)}},C=k=>k.done?d(k.value):Promise.resolve(k.value).then(v,L);C((n=n.apply(m,o)).next())});import{j as e}from"./vendor-ui-XVksrZ5j.js";import{r as h}from"./vendor-react-DruPVAFJ.js";import{f as de,B as u,u as ye,e as D,C as Se,L as w,I}from"./index-BmVdEGiP.js";import{A as De,D as Ce}from"./data-table-qMSffp-C.js";import{D as Ee,a as Te,b as Ie,d as Ae,e as Me,c as K}from"./dropdown-menu-BDf3JuuU.js";import{B as R}from"./badge-DVlZ2whw.js";import{M as Pe}from"./more-horizontal-B_tWyvgt.js";import{P as Oe}from"./pencil-DR_wvNsn.js";import{P as _e}from"./power-jHrPMCtu.js";import{T as Be}from"./trash-2-SALYx2gF.js";import{D as U,b as V,c as z,d as H,e as Y,f as le}from"./dialog-FHcYl0q1.js";import{S as $e,a as Fe,b as Le,c as Ge,d as ie}from"./select-CT0oUeJ5.js";import{U as q}from"./upload-BUKVXWUj.js";import{D as ne}from"./download-Cc0AJeaF.js";import{P as Ke}from"./plus-BcW2gs2h.js";import"./vendor-utils-DI_-nBMo.js";import"./vendor-charts-BB9d_U7u.js";import"./vendor-table-DRaoTYIa.js";import"./table-BTQg55BV.js";import"./chevron-left-Cico8d1J.js";import"./chevron-right-DGvanUYx.js";import"./check-BFyP0Qeo.js";import"./circle-B_uur8fk.js";import"./chevron-down-CL3T_hsi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ve=(m,o,n)=>[{accessorKey:"name",header:({column:d})=>e.jsxs(u,{variant:"ghost",onClick:()=>d.toggleSorting(d.getIsSorted()==="asc"),className:"hover:bg-slate-100 dark:hover:bg-slate-800 text-xs sm:text-sm p-1 sm:p-4 h-auto",children:["Nama Guru",e.jsx(De,{className:"ml-1 sm:ml-2 h-3 w-3 sm:h-4 sm:w-4"})]}),cell:({row:d})=>e.jsxs("div",{className:"font-medium text-slate-900 dark:text-white text-xs sm:text-sm min-w-[100px] max-w-[150px] sm:max-w-none",children:[e.jsx("div",{className:"truncate",children:d.getValue("name")}),e.jsx("div",{className:"text-[10px] sm:hidden text-slate-500 dark:text-slate-400 truncate mt-0.5",children:d.original.email||"Tidak ada Email"})]})},{accessorKey:"nip",header:()=>e.jsx("div",{className:"text-xs sm:text-sm hidden sm:table-cell",children:"NIP"}),cell:({row:d})=>e.jsx("span",{className:"font-mono text-xs sm:text-sm text-slate-600 dark:text-slate-400 whitespace-nowrap hidden sm:table-cell",children:d.getValue("nip")||"-"})},{accessorKey:"email",header:()=>e.jsx("div",{className:"text-xs sm:text-sm hidden md:table-cell",children:"Email"}),cell:({row:d})=>e.jsxs("div",{className:"items-center gap-1 text-slate-600 dark:text-slate-400 min-w-[120px] max-w-[180px] hidden md:flex",children:[e.jsx(Re,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"text-xs sm:text-sm",children:d.getValue("email")})]})},{accessorKey:"phone",header:()=>e.jsx("div",{className:"text-xs sm:text-sm hidden md:block",children:"No. Telepon"}),cell:({row:d})=>{const i=d.getValue("phone");return i?e.jsxs("div",{className:"items-center gap-1 text-slate-600 dark:text-slate-400 hidden md:flex",children:[e.jsx(Ue,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:i})]}):e.jsx("span",{className:"text-slate-400 dark:text-slate-600 hidden md:inline",children:"-"})}},{id:"subjects",header:()=>e.jsx("div",{className:"text-xs sm:text-sm hidden lg:block",children:"Mata Pelajaran"}),cell:({row:d})=>{const i=d.original.subjects;return!i||i.length===0?e.jsx("span",{className:"text-slate-400 dark:text-slate-600 hidden lg:inline",children:"-"}):e.jsxs("div",{className:"hidden lg:flex flex-wrap gap-1 max-w-[200px]",children:[i.slice(0,4).map(v=>e.jsx(R,{variant:"outline",className:"text-xs dark:border-slate-600 dark:text-slate-300",children:v.name},v.id)),i.length>4&&e.jsxs(R,{variant:"secondary",className:"text-xs dark:bg-slate-700 dark:text-slate-300",children:["+",i.length-4]})]})}},{accessorKey:"is_active",header:()=>e.jsx("div",{className:"text-xs sm:text-sm hidden md:table-cell",children:"Status"}),cell:({row:d})=>{const i=d.getValue("is_active");return e.jsx(R,{variant:i?"default":"secondary",className:`hidden md:inline-flex ${i?"bg-green-100 text-green-800 border-green-300 dark:bg-green-900 dark:text-green-100":"bg-red-100 text-red-800 border-red-300 dark:bg-red-900 dark:text-red-100"}`,children:i?"Aktif":"Nonaktif"})}},{id:"actions",header:()=>e.jsx("div",{className:"text-xs sm:text-sm text-center",children:"Aksi"}),cell:({row:d})=>{const i=d.original;return e.jsx("div",{className:"flex justify-center",children:e.jsxs(Ee,{children:[e.jsx(Te,{asChild:!0,children:e.jsxs(u,{variant:"ghost",className:"h-8 w-8 sm:h-8 sm:w-8 p-0 hover:bg-slate-100 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Pe,{className:"h-4 w-4"})]})}),e.jsxs(Ie,{align:"end",className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 w-36",children:[e.jsx(Ae,{className:"dark:text-white text-xs",children:"Aksi"}),e.jsx(Me,{className:"bg-slate-200 dark:bg-slate-700"}),e.jsxs(K,{onClick:()=>m(i),className:"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-200 text-xs",children:[e.jsx(Oe,{className:"mr-2 h-3 w-3"}),"Edit"]}),n&&e.jsxs(K,{onClick:()=>n(i),className:`cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 text-xs ${i.is_active?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:[e.jsx(_e,{className:"mr-2 h-3 w-3"}),i.is_active?"Nonaktifkan":"Aktifkan"]}),e.jsxs(K,{onClick:()=>o(i),className:"cursor-pointer text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/30 text-xs",children:[e.jsx(Be,{className:"mr-2 h-3 w-3"}),"Hapus"]})]})]})})}}];function gs(){var Z,ee,se;const[m,o]=h.useState([]),[n,d]=h.useState([]),[i,v]=h.useState(!1),[L,C]=h.useState(!1),[k,E]=h.useState(!1),[P,G]=h.useState(null),[A,W]=h.useState(!1),[p,O]=h.useState(null),[T,J]=h.useState(null),[X,oe]=h.useState(null),[B,$]=h.useState(!1),[ce,me]=h.useState(!0),[M,F]=h.useState([]),{toast:x}=ye(),[c,N]=h.useState({name:"",email:"",password:"",gender:"",birth_date:"",phone:"",address:"",nip:""});h.useEffect(()=>{_(),xe()},[]);const xe=()=>S(this,null,function*(){try{const s=yield D.get("/subjects");d(s.data.data||[])}catch(s){console.error("Error fetching subjects:",s)}}),_=()=>S(this,null,function*(){var s,r;try{const l=((yield D.get("/users?role=guru")).data.data||[]).map(y=>b(f({},y),{subjects:Array.isArray(y.subjects)?y.subjects.map(g=>{var j,ae;return{id:g.id,name:(ae=(j=g.name)!=null?j:g.subject_name)!=null?ae:""}}):[]}));o(l)}catch(a){console.error("Error fetching teachers:",a),x({title:"Error",description:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal memuat data guru",variant:"destructive"})}finally{me(!1)}}),Q=s=>{var r;s?(J(s),N({name:s.name,email:s.email,password:"",gender:s.gender,birth_date:s.birth_date,phone:s.phone||"",address:s.address||"",nip:s.nip||""}),F(((r=s.subjects)==null?void 0:r.map(a=>a.id))||[])):(J(null),N({name:"",email:"",password:"",gender:"",birth_date:"",phone:"",address:"",nip:""}),F([])),v(!0)},he=()=>S(this,null,function*(){var s,r;$(!0);try{const a=b(f({},c),{role:"guru",subject_ids:M});T&&!c.password&&delete a.password,T?(yield D.put(`/users/${T.id}`,a),x({title:"Berhasil",description:"Data guru berhasil diperbarui"})):(yield D.post("/users",a),x({title:"Berhasil",description:"Guru berhasil ditambahkan"})),v(!1),_()}catch(a){x({title:"Error",description:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Terjadi kesalahan",variant:"destructive"})}finally{$(!1)}}),pe=()=>S(this,null,function*(){var s,r;if(X){$(!0);try{yield D.delete(`/users/${X}`),x({title:"Berhasil",description:"Guru berhasil dihapus"}),C(!1),_()}catch(a){x({title:"Error",description:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal menghapus guru",variant:"destructive"})}finally{$(!1)}}}),ue=s=>S(this,null,function*(){var a,t;const r=s.is_active?"menonaktifkan":"mengaktifkan";if(confirm(`Apakah Anda yakin ingin ${r} guru ${s.name}?`))try{yield D.post(`/users/${s.id}/toggle-active`),x({title:"Berhasil",description:`Guru berhasil ${s.is_active?"dinonaktifkan":"diaktifkan"}`}),_()}catch(l){console.error("Error toggling teacher status:",l),x({title:"Error",description:((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||`Gagal ${r} guru`,variant:"destructive"})}}),ge=()=>S(this,null,function*(){var s,r;try{const a=yield D.get("/teachers/template",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),l=document.createElement("a");l.href=t,l.setAttribute("download","template_import_guru.xlsx"),document.body.appendChild(l),l.click(),l.remove(),x({title:"Berhasil",description:"Template berhasil didownload"})}catch(a){console.error("Error downloading template:",a),x({title:"Error",description:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal download template",variant:"destructive"})}}),je=()=>S(this,null,function*(){var s,r;if(!P){x({title:"Error",description:"Silakan pilih file Excel terlebih dahulu",variant:"destructive"});return}W(!0),O(null);try{const a=new FormData;a.append("file",P);const t=yield D.post("/teachers/import",a,{headers:{"Content-Type":"multipart/form-data"}});O(t.data),x({title:"Import Berhasil",description:`${t.data.stats.success} guru berhasil diimport${t.data.stats.failed>0?`, ${t.data.stats.failed} gagal`:""}`}),_(),t.data.stats.failed===0&&setTimeout(()=>{E(!1),G(null),O(null)},3e3)}catch(a){console.error("Error importing teachers:",a);const t=(s=a.response)==null?void 0:s.data;let l=[];t!=null&&t.errors&&(Array.isArray(t.errors)?l=t.errors:typeof t.errors=="object"&&(l=Object.entries(t.errors).map(([g,j])=>Array.isArray(j)?{field:g,message:j.join(", ")}:typeof j=="string"?{field:g,message:j}:{field:g,message:String(j)}))),O({message:(t==null?void 0:t.message)||"Import gagal",errors:l,stats:(t==null?void 0:t.stats)||null});let y=(t==null?void 0:t.message)||a.message||"Gagal mengimport data";((r=a.response)==null?void 0:r.status)===422&&l.length>0&&(y=`Validasi gagal: ${l.slice(0,3).map(g=>{var j;return g.message||((j=g.errors)==null?void 0:j[0])||String(g)}).join("; ")}`,l.length>3&&(y+=` dan ${l.length-3} error lainnya`)),x({title:"Error Import",description:y,variant:"destructive"})}finally{W(!1)}}),fe=()=>S(this,null,function*(){var s,r;try{const a=yield D.get("/teachers/export",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([a.data])),l=document.createElement("a");l.href=t;const y=`data_guru_${new Date().toISOString().split("T")[0]}.xlsx`;l.setAttribute("download",y),document.body.appendChild(l),l.click(),l.remove(),x({title:"Berhasil",description:"Data guru berhasil diexport"})}catch(a){console.error("Error exporting teachers:",a),x({title:"Error",description:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal export data",variant:"destructive"})}});return ce?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Memuat data..."})]})}):e.jsxs("div",{className:"p-3 sm:p-6 space-y-4 sm:space-y-6 pb-20 sm:pb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Kelola Guru"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Manajemen data guru dan pengajar"})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>E(!0),className:"flex-1 sm:flex-none",children:[e.jsx(q,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Import"})]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:fe,className:"flex-1 sm:flex-none",children:[e.jsx(ne,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs(u,{onClick:()=>Q(),className:"flex-1 sm:flex-none",children:[e.jsx(Ke,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"sm:inline",children:"Tambah"})]})]})]}),e.jsx(Se,{className:"p-2 sm:p-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Ce,{columns:Ve(s=>Q(s),s=>{oe(s.id),C(!0)},s=>ue(s)),data:m,searchKey:"name",searchPlaceholder:"Cari guru berdasarkan nama..."})})}),e.jsx(U,{open:i,onOpenChange:v,children:e.jsxs(V,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-[95vw] sm:w-full",children:[e.jsxs(z,{children:[e.jsx(H,{className:"text-lg sm:text-xl",children:T?"Edit Guru":"Tambah Guru"}),e.jsx(Y,{className:"text-sm",children:T?"Perbarui informasi guru":"Tambahkan guru baru ke sistem"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx(w,{htmlFor:"name",className:"text-sm",children:"Nama Lengkap *"}),e.jsx(I,{id:"name",value:c.name,onChange:s=>N(b(f({},c),{name:s.target.value})),placeholder:"Nama lengkap guru",className:"text-sm"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(w,{htmlFor:"nip",className:"text-sm",children:"NIP"}),e.jsx(I,{id:"nip",value:c.nip,onChange:s=>N(b(f({},c),{nip:s.target.value})),placeholder:"Nomor Induk Pegawai",className:"text-sm"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(w,{htmlFor:"gender",className:"text-sm",children:"Jenis Kelamin *"}),e.jsxs($e,{value:c.gender,onValueChange:s=>N(b(f({},c),{gender:s})),children:[e.jsx(Fe,{className:"text-sm",children:e.jsx(Le,{placeholder:"Pilih jenis kelamin"})}),e.jsxs(Ge,{children:[e.jsx(ie,{value:"L",children:"Laki-laki"}),e.jsx(ie,{value:"P",children:"Perempuan"})]})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(w,{htmlFor:"birth_date",className:"text-sm",children:"Tanggal Lahir *"}),e.jsx(I,{id:"birth_date",type:"date",value:c.birth_date,onChange:s=>N(b(f({},c),{birth_date:s.target.value})),className:"text-sm"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(w,{htmlFor:"phone",className:"text-sm",children:"Nomor Telepon"}),e.jsx(I,{id:"phone",value:c.phone,onChange:s=>N(b(f({},c),{phone:s.target.value})),placeholder:"08xxxxxxxxxx",className:"text-sm"})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx(w,{htmlFor:"address",className:"text-sm",children:"Alamat"}),e.jsx("textarea",{id:"address",className:"w-full min-h-[80px] px-3 py-2 border border-input rounded-md text-sm bg-background text-foreground dark:bg-slate-900 dark:text-white dark:border-slate-700 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",value:c.address,onChange:s=>N(b(f({},c),{address:s.target.value})),placeholder:"Alamat lengkap"})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx(w,{className:"text-sm",children:"Mata Pelajaran"}),e.jsx("div",{className:"border rounded-md p-3 max-h-[150px] overflow-y-auto",children:n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Tidak ada mata pelajaran tersedia"}):e.jsx("div",{className:"space-y-2",children:n.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:M.includes(s.id),onChange:r=>{r.target.checked?F([...M,s.id]):F(M.filter(a=>a!==s.id))},className:"rounded"}),e.jsx("span",{className:"text-sm flex-1",children:s.name}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.code})]},s.id))})}),M.length>0&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[M.length," mata pelajaran dipilih"]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(w,{htmlFor:"email",className:"text-sm",children:"Email *"}),e.jsx(I,{id:"email",type:"email",value:c.email,onChange:s=>N(b(f({},c),{email:s.target.value})),placeholder:"email@example.com",className:"text-sm"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsxs(w,{htmlFor:"password",className:"text-sm",children:["Password"," ",T&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(kosongkan jika tidak diubah)"})]}),e.jsx(I,{id:"password",type:"password",value:c.password,onChange:s=>N(b(f({},c),{password:s.target.value})),placeholder:T?"Kosongkan jika tidak diubah":"Password",className:"text-sm"})]})]}),e.jsxs(le,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>v(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(u,{onClick:he,disabled:B,className:"w-full sm:w-auto",children:B?"Menyimpan...":"Simpan"})]})]})}),e.jsx(U,{open:L,onOpenChange:C,children:e.jsxs(V,{className:"w-[95vw] sm:w-full",children:[e.jsxs(z,{children:[e.jsx(H,{className:"text-lg",children:"Hapus Guru?"}),e.jsx(Y,{className:"text-sm",children:"Data guru akan dihapus permanen. Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(le,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>C(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(u,{variant:"destructive",onClick:pe,disabled:B,className:"w-full sm:w-auto",children:B?"Menghapus...":"Hapus"})]})]})}),e.jsx(U,{open:k,onOpenChange:E,children:e.jsxs(V,{className:"w-[95vw] sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(z,{children:[e.jsxs(H,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(q,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Import Data Guru dari Excel"]}),e.jsx(Y,{className:"text-sm",children:"Upload file Excel (.xlsx atau .xls) untuk import data guru secara massal"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"import-file",className:"text-sm",children:"Pilih File Excel"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(I,{id:"import-file",type:"file",accept:".xlsx,.xls",onChange:s=>{var r;return G(((r=s.target.files)==null?void 0:r[0])||null)},disabled:A,className:"flex-1 text-sm"}),e.jsxs(u,{variant:"outline",onClick:ge,disabled:A,className:"whitespace-nowrap text-sm w-full sm:w-auto",size:"sm",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Template"]})]}),P&&e.jsxs("p",{className:"text-sm text-green-600 break-all",children:["âœ“ File dipilih: ",P.name]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-blue-900 text-xs sm:text-sm",children:"ðŸ“‹ Format Data Excel:"}),e.jsxs("ul",{className:"text-xs sm:text-sm text-blue-800 space-y-1 ml-4 list-disc",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"nama"})," - Wajib diisi"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"email"})," - Wajib diisi, harus unique"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"nip"})," - Optional, unik jika diisi (format TEXT)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"jenis_kelamin"})," - Optional (L/P)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"password"})," - Optional (default: password123)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"tanggal_lahir"})," - Optional (YYYY-MM-DD atau tanggal Excel)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"phone"})," - Optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"address"})," - Optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"status"})," - Optional (aktif/nonaktif)"]})]})]}),p&&e.jsxs("div",{className:`rounded-lg p-3 sm:p-4 space-y-2 ${((Z=p.stats)==null?void 0:Z.failed)>0?"bg-yellow-50 border border-yellow-200":"bg-green-50 border border-green-200"}`,children:[e.jsx("h4",{className:`font-semibold text-xs sm:text-sm ${((ee=p.stats)==null?void 0:ee.failed)>0?"text-yellow-900":"text-green-900"}`,children:((se=p.stats)==null?void 0:se.failed)>0?"âš ï¸ Import Selesai dengan Beberapa Error":"âœ… Import Berhasil!"}),p.stats&&e.jsxs("div",{className:"text-xs sm:text-sm space-y-1",children:[e.jsxs("p",{className:"text-green-700",children:["âœ“ Berhasil: ",p.stats.success," guru"]}),p.stats.failed>0&&e.jsxs("p",{className:"text-red-700",children:["âœ— Gagal: ",p.stats.failed," guru"]})]}),p.errors&&p.errors.length>0&&e.jsxs("div",{className:"mt-3 max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-red-800 mb-2",children:"Detail Error:"}),e.jsxs("div",{className:"space-y-2",children:[p.errors.slice(0,5).map((s,r)=>{var l;let a="",t="";return typeof s=="string"?t=s:s.row?(a=`Baris ${s.row}`,t=((l=s.errors)==null?void 0:l.join(", "))||s.error||s.message||String(s),s.attribute&&(t=`${s.attribute}: ${t}`)):s.field?(a=s.field,t=s.message||String(s)):s.error||s.errors?t=s.error||(Array.isArray(s.errors)?s.errors.join(", "):String(s.errors)):t=String(s),e.jsxs("div",{className:"text-xs bg-white p-2 rounded border border-red-200 break-words",children:[a&&e.jsx("p",{className:"font-semibold text-red-700 mb-1",children:a}),e.jsx("p",{className:"text-red-600",children:t})]},r)}),p.errors.length>5&&e.jsxs("p",{className:"text-xs text-gray-600 italic",children:["...dan ",p.errors.length-5," error lainnya"]})]})]})]}),A&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:"Mengimport data..."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>{E(!1),G(null),O(null)},disabled:A,className:"w-full sm:w-auto",children:p?"Tutup":"Batal"}),e.jsx(u,{className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",onClick:je,disabled:!P||A,children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Import Sekarang"]})})]})]})})]})}export{gs as default};
